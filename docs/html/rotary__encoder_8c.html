<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GSP - Entwicklerdokumentation: aufgabe2/rotary_encoder.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GSP - Entwicklerdokumentation
   </div>
   <div id="projectbrief">Praktikum Grundlagen systemnahen Programmierens - Dokumentation aller Funktionen</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('rotary__encoder_8c.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">rotary_encoder.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of the Rotary Encoder module.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="rotary__encoder_8h.html">rotary_encoder.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="aufgabe2_2errors_8h.html">errors.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hardware__io_8h.html">hardware_io.h</a>&quot;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad8f1771d4051eafad228df4d397d7e47"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotary__encoder_8c.html#ad8f1771d4051eafad228df4d397d7e47">CPR</a>&#160;&#160;&#160;360</td></tr>
<tr class="separator:ad8f1771d4051eafad228df4d397d7e47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad83c9ccb88d9e822279aad18ac95195"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotary__encoder_8c.html#aad83c9ccb88d9e822279aad18ac95195">PPR</a>&#160;&#160;&#160;(<a class="el" href="rotary__encoder_8c.html#ad8f1771d4051eafad228df4d397d7e47">CPR</a> * 4)</td></tr>
<tr class="separator:aad83c9ccb88d9e822279aad18ac95195"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad202920b762b4f8889db96cceeb8df22"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotary__encoder_8c.html#ad202920b762b4f8889db96cceeb8df22">DEGREES_PER_REVOLUTION</a>&#160;&#160;&#160;360</td></tr>
<tr class="separator:ad202920b762b4f8889db96cceeb8df22"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a349492e4c7c080375830f94d859a2e70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotary__encoder_8c.html#a349492e4c7c080375830f94d859a2e70">encoder_reset</a> ()</td></tr>
<tr class="memdesc:a349492e4c7c080375830f94d859a2e70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the encoder position.  <a href="#a349492e4c7c080375830f94d859a2e70">More...</a><br /></td></tr>
<tr class="separator:a349492e4c7c080375830f94d859a2e70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa08602134e76cbfda364f3097c673324"><td class="memItemLeft" align="right" valign="top"><a class="el" href="rotary__encoder_8h.html#a224b9163917ac32fc95a60d8c1eec3aa">Direction</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotary__encoder_8c.html#aa08602134e76cbfda364f3097c673324">encoder_get_direction</a> ()</td></tr>
<tr class="memdesc:aa08602134e76cbfda364f3097c673324"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the direction the encoder is currently turning in.  <a href="#aa08602134e76cbfda364f3097c673324">More...</a><br /></td></tr>
<tr class="separator:aa08602134e76cbfda364f3097c673324"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3510912bb22ee5d16d71fcc6906195e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotary__encoder_8c.html#ae3510912bb22ee5d16d71fcc6906195e">encoder_get_position_raw</a> ()</td></tr>
<tr class="memdesc:ae3510912bb22ee5d16d71fcc6906195e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the position in pulses.  <a href="#ae3510912bb22ee5d16d71fcc6906195e">More...</a><br /></td></tr>
<tr class="separator:ae3510912bb22ee5d16d71fcc6906195e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8082382e47d958690d9ffb5d2656873"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotary__encoder_8c.html#ac8082382e47d958690d9ffb5d2656873">encoder_get_position</a> ()</td></tr>
<tr class="memdesc:ac8082382e47d958690d9ffb5d2656873"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the position in 0.1 degrees.  <a href="#ac8082382e47d958690d9ffb5d2656873">More...</a><br /></td></tr>
<tr class="separator:ac8082382e47d958690d9ffb5d2656873"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf3a132a78f95d56182fd3b80f031ec0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotary__encoder_8c.html#aaf3a132a78f95d56182fd3b80f031ec0">get_phase</a> ()</td></tr>
<tr class="memdesc:aaf3a132a78f95d56182fd3b80f031ec0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the inputs and calculates the phase.  <a href="#aaf3a132a78f95d56182fd3b80f031ec0">More...</a><br /></td></tr>
<tr class="separator:aaf3a132a78f95d56182fd3b80f031ec0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b881ce2add0dd26a0769b05ef7edb18"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotary__encoder_8c.html#a0b881ce2add0dd26a0769b05ef7edb18">encoder_update</a> ()</td></tr>
<tr class="memdesc:a0b881ce2add0dd26a0769b05ef7edb18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the encoder.  <a href="#a0b881ce2add0dd26a0769b05ef7edb18">More...</a><br /></td></tr>
<tr class="separator:a0b881ce2add0dd26a0769b05ef7edb18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1810f19ef7d35edd2e26a7d4ee29f6bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotary__encoder_8c.html#a1810f19ef7d35edd2e26a7d4ee29f6bc">encoder_init</a> ()</td></tr>
<tr class="memdesc:a1810f19ef7d35edd2e26a7d4ee29f6bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the encoder.  <a href="#a1810f19ef7d35edd2e26a7d4ee29f6bc">More...</a><br /></td></tr>
<tr class="separator:a1810f19ef7d35edd2e26a7d4ee29f6bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a53421c695d00016ab925777d423b4eb6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="rotary__encoder_8h.html#a224b9163917ac32fc95a60d8c1eec3aa">Direction</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotary__encoder_8c.html#a53421c695d00016ab925777d423b4eb6">direction</a></td></tr>
<tr class="separator:a53421c695d00016ab925777d423b4eb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a401e942526aac47cef94f478182486e7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotary__encoder_8c.html#a401e942526aac47cef94f478182486e7">position</a></td></tr>
<tr class="separator:a401e942526aac47cef94f478182486e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf271d18df1d9f738caf9433354dab85"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rotary__encoder_8c.html#abf271d18df1d9f738caf9433354dab85">valid_state</a></td></tr>
<tr class="separator:abf271d18df1d9f738caf9433354dab85"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of the Rotary Encoder module. </p>
<hr/>
<dl class="section author"><dt>Author</dt><dd>Moritz Hoewer (<a href="#" onclick="location.href='mai'+'lto:'+'Mor'+'it'+'z.H'+'oe'+'wer'+'@h'+'aw-'+'ha'+'mbu'+'rg'+'.de'; return false;">Morit<span style="display: none;">.nosp@m.</span>z.Ho<span style="display: none;">.nosp@m.</span>ewer@<span style="display: none;">.nosp@m.</span>haw-<span style="display: none;">.nosp@m.</span>hambu<span style="display: none;">.nosp@m.</span>rg.d<span style="display: none;">.nosp@m.</span>e</a>) </dd>
<dd>
Philip Scheer (<a href="#" onclick="location.href='mai'+'lto:'+'Phi'+'li'+'p.S'+'ch'+'eer'+'@h'+'aw-'+'ha'+'mbu'+'rg'+'.de'; return false;">Phili<span style="display: none;">.nosp@m.</span>p.Sc<span style="display: none;">.nosp@m.</span>heer@<span style="display: none;">.nosp@m.</span>haw-<span style="display: none;">.nosp@m.</span>hambu<span style="display: none;">.nosp@m.</span>rg.d<span style="display: none;">.nosp@m.</span>e</a>) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>14.10.2016 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad8f1771d4051eafad228df4d397d7e47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8f1771d4051eafad228df4d397d7e47">&sect;&nbsp;</a></span>CPR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CPR&#160;&#160;&#160;360</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>how many cycles per revolution </p>

</div>
</div>
<a id="ad202920b762b4f8889db96cceeb8df22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad202920b762b4f8889db96cceeb8df22">&sect;&nbsp;</a></span>DEGREES_PER_REVOLUTION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEGREES_PER_REVOLUTION&#160;&#160;&#160;360</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>how many degrees in one revolution </p>

</div>
</div>
<a id="aad83c9ccb88d9e822279aad18ac95195"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad83c9ccb88d9e822279aad18ac95195">&sect;&nbsp;</a></span>PPR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PPR&#160;&#160;&#160;(<a class="el" href="rotary__encoder_8c.html#ad8f1771d4051eafad228df4d397d7e47">CPR</a> * 4)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>how many pulses per revolution (always 4x CPR) </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa08602134e76cbfda364f3097c673324"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa08602134e76cbfda364f3097c673324">&sect;&nbsp;</a></span>encoder_get_direction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rotary__encoder_8h.html#a224b9163917ac32fc95a60d8c1eec3aa">Direction</a> encoder_get_direction </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the direction the encoder is currently turning in. </p>
<dl class="section return"><dt>Returns</dt><dd>the direction </dd></dl>

</div>
</div>
<a id="ac8082382e47d958690d9ffb5d2656873"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8082382e47d958690d9ffb5d2656873">&sect;&nbsp;</a></span>encoder_get_position()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int encoder_get_position </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the position in 0.1 degrees. </p>
<p>Position is relative to last reset, negative values indicate that the encoder turned backwards</p>
<dl class="section return"><dt>Returns</dt><dd>position in 0.1 degrees </dd></dl>

</div>
</div>
<a id="ae3510912bb22ee5d16d71fcc6906195e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3510912bb22ee5d16d71fcc6906195e">&sect;&nbsp;</a></span>encoder_get_position_raw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int encoder_get_position_raw </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the position in pulses. </p>
<p>Position is relative to last reset, negative values indicate that the encoder turned backwards</p>
<dl class="section return"><dt>Returns</dt><dd>position in pulses </dd></dl>

</div>
</div>
<a id="a1810f19ef7d35edd2e26a7d4ee29f6bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1810f19ef7d35edd2e26a7d4ee29f6bc">&sect;&nbsp;</a></span>encoder_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void encoder_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the encoder. </p>

</div>
</div>
<a id="a349492e4c7c080375830f94d859a2e70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a349492e4c7c080375830f94d859a2e70">&sect;&nbsp;</a></span>encoder_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void encoder_reset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the encoder position. </p>

</div>
</div>
<a id="a0b881ce2add0dd26a0769b05ef7edb18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b881ce2add0dd26a0769b05ef7edb18">&sect;&nbsp;</a></span>encoder_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int encoder_update </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the encoder. </p>
<p>This method will read the two inputs calculating the current phase. It then updates the position and Direction variables accordingly. If an invalid phase transition is detected, an error is returned.</p>
<dl class="section return"><dt>Returns</dt><dd>error code </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>no error </td></tr>
    <tr><td class="paramname">E_INVALID_STATE</td><td>the encoder has moved too much - state is now unknown </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaf3a132a78f95d56182fd3b80f031ec0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf3a132a78f95d56182fd3b80f031ec0">&sect;&nbsp;</a></span>get_phase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int get_phase </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads the inputs and calculates the phase. </p>
<dl class="section return"><dt>Returns</dt><dd>the phase </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a53421c695d00016ab925777d423b4eb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53421c695d00016ab925777d423b4eb6">&sect;&nbsp;</a></span>direction</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="rotary__encoder_8h.html#a224b9163917ac32fc95a60d8c1eec3aa">Direction</a> direction</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>the direction the encoder is turning </p>

</div>
</div>
<a id="a401e942526aac47cef94f478182486e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a401e942526aac47cef94f478182486e7">&sect;&nbsp;</a></span>position</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int position</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>the position of the encoder in pulses relative to the last reset </p>

</div>
</div>
<a id="abf271d18df1d9f738caf9433354dab85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf271d18df1d9f738caf9433354dab85">&sect;&nbsp;</a></span>valid_state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool valid_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>is the encoder in a valid state </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_e6f4133635a47086ce820f4b47873b7f.html">aufgabe2</a></li><li class="navelem"><a class="el" href="rotary__encoder_8c.html">rotary_encoder.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.12 </li>
  </ul>
</div>
</body>
</html>
